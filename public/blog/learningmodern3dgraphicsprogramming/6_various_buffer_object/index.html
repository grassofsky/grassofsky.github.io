<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name="generator" content="Hugo 0.21" />

  <base href='https://stupidgrass.github.io/'>
  


<title>6. opengl使用不同的缓存对象 &bull; Stupidgrass</title>

  <link rel='canonical' href='https://stupidgrass.github.io/blog/learningmodern3dgraphicsprogramming/6_various_buffer_object/'>
  <link href='' rel='alternate' type='application/rss+xml' title='Stupidgrass&#39;s Notepad Online' />
  
<link rel='stylesheet' href='/css/main.css'>
<link rel='stylesheet' href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


</head>


<body class='page'>
  <div class='site'>
    <header id='header' class='header-container'>
      <div class='site-header'>
        <nav id='navmenu'>
  <ul class='main-menu'>
    
    <li>
      <a href='https://stupidgrass.github.io/' class=''>Home</a>
    </li>
    
    <li>
      <a href='https://stupidgrass.github.io/blog/' class=''>Blog</a>
    </li>
    
    <li>
      <a href='https://stupidgrass.github.io/categories/' class=''>Categories</a>
    </li>
    
    <li>
      <a href='https://stupidgrass.github.io/tags/' class=''>Tags</a>
    </li>
    
  </ul>
</nav>

        <div class='site-info'>
          
          <p class='site-title title'>Stupidgrass&#39;s Notepad Online</p>
          
          <p class='site-description'>Medical image rendering, c&#43;&#43;, python, and others</p>
        </div>
      </div>
    </header>


<main class='main'>
  <article class='single'>
    <header class='single-header'>
  <div class='single-info'>
    <h1 class='single-title title'>6. opengl使用不同的缓存对象</h1>
    
  </div>
  
<div class='meta'>
  <span class='posted-on'>
    <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2'>
  
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
  <line x1="16" y1="2" x2="16" y2="6"/>
  <line x1="8" y1="2" x2="8" y2="6"/>
  <line x1="3" y1="10" x2="21" y2="10"/>
  
</svg>

    <time class='date'>30057, May 120</time>
  </span>
  <span class='byline'>
    <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2'>
  
  <path d="M21,21V20c0-2.76-4-5-9-5s-9,2.24-9,5v1"/>
  <path d="M16,6.37A4,4,0,1,1,12.63,3,4,4,0,0,1,16,6.37Z"/>
  
</svg>

    <a href="#">Stupidgrass</a>
  </span>
</div>


</header>

    <div class='single-content'>
      

<h1 id="opengl使用不同的缓存对象">opengl使用不同的缓存对象</h1>

<p>在<a href="http://www.cnblogs.com/grass-and-moon/p/6684854.html">设置颜色</a>一章中，我们使用了一个缓存对象来存储点和颜色的信息。那么我们有没有可能，将点和颜色的信息分开存储呢？这在实际应用中也许可以使得各个属性之间保持相互的独立。本章补充内容需要做的事情就是这个。</p>

<h2 id="相对于上一章需要改变的内容有">相对于上一章需要改变的内容有</h2>

<p>顶点属性和颜色分别独立存储：</p>

<pre><code class="language-c">const float vertex[] = {
    0.0f, 0.5f, 0.0f, 1.0f,
    0.5f, -0.366f, 0.0f, 1.0f,
    -0.5f, -0.366f, 0.0f, 1.0f,
};

const float color[] = {
    1.0f, 0.0f, 0.0f, 1.0f,
    0.0f, 1.0f, 0.0f, 1.0f,
    0.0f, 0.0f, 1.0f, 1.0f
};
</code></pre>

<h3 id="vertex-array-object">Vertex Array Object</h3>

<p>上一章中，绘制图像所需的数据都存储在Vertex Buffer Object中，然后利用<code>glVertexAttribPointer</code>来告诉opengl该缓存对象中的哪个数据段是顶点位置属性，哪些数据段是颜色属性。如果想要将多个属性分别存储于独立的VBO中，那么此处就需要VAO出马上任了。VAO能够用来存储多个VBO对象的对象。它被设计用来存储用于完成对象渲染所需要的信息：这里包括，数据，数据格式，以及不同的数据对应的着色器中的location。</p>

<p>于是将上一章中的<code>InitializeVertexBuffer</code>改成<code>InitializeVAO</code></p>

<pre><code class="language-c">void InitializeVAO()
{
    glGenVertexArrays(1, &amp;vao);
    glBindVertexArray(vao);

    glGenBuffers(1, &amp;positionBufferObject);

    glBindBuffer(GL_ARRAY_BUFFER, positionBufferObject);
    glBufferData(GL__ARRAY_BUFFER, sizeof(vertexData), vertexData, GL_STATIC_DRAW);
    glVertexAttribPointer(0, 4, GL_FLOAT, GL_FALSE, 0, 0);

    glGenBuffers(1, &amp;colorBufferObject);
    glBindBuffer(GL_ARRAY_BUFFER, colorBufferObject);
    glBufferData(GL_ARRAY_BUFFER, sizeof(colorData), colorData, GL_STATIC_DRAW);
    glVertexAttribPointer(1, 4, GL_FLOAT, GL_FALSE, 0, 0);

    glBindBuffer(GL_ARRAY_BUFFER, 0);
}
</code></pre>

<p>同时display中的代码也需要进行如下的修改：</p>

<pre><code class="language-c">void display()
{
    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
    glClear(GL_COLOR_BUFFER_BIT);

    program.UseProgram();

    glBindVertexArray(vao);
    glEnableVertexAttribArray(0);
    glEnableVertexAttribArray(1);

    glDrawArrays(GL___TRIANGLES, 0, 3);
    glDisableVertexAttribArray(0);
    glDisableVertexAttribArray(1);

    glUseProgram(0);
    glutSwapBuffers();
}
</code></pre>

    </div>
    
<footer class='single-footer'>
  
    
    

<div class='categories'>
  <span class='category-icon'>
    <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2'>
  
  <path d="M22,19a2,2,0,0,1-2,2H4a2,2,0,0,1-2-2V5A2,2,0,0,1,4,3H9l2,3h9a2,2,0,0,1,2,2Z"/>
  
</svg>

  </span><a class='category' href='/categories/translation-of-books'>Translation of books</a></div>

  
    
    

<div class='tags'>
  <span class='tag-icon'>
    <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2'>
  
  <path d="M20.59,13.41l-7.17,7.17a2,2,0,0,1-2.83,0L2,12V2H12l8.59,8.59A2,2,0,0,1,20.59,13.41Z"/>
  <line x1="7" y1="7" x2="7" y2="7"/>
  
</svg>

  </span><a class='tag' href='/tags/opengl'>opengl</a>, <a class='tag' href='/tags/learningmodern3dgraphicsprogramming'>LearningModern3DGraphicsProgramming</a></div>

  
</footer>


  </article>
</main>

    <footer id='footer' class='footer-container'>
      <div class='footer'>
        <div class='social'>
          <nav>
  <ul class='social-menu'>
  
    
    <li>
      <a href='https://github.com/stupidgrass' target='_blank'>
        GitHub
      </a>
    </li>
    
  
  </ul>
</nav>

        </div>

        <div class='copyright'>
          
  

<p>
  &copy; 2017 MunifTanjim
</p>

        </div>
      </div>
    </footer>

  </div>

  <script src='/js/main.js'></script>

</body>

</html>

